# MarketMCP AKToolsé›†æˆæŒ‡å—

æœ¬æ–‡æ¡£ä»‹ç»å¦‚ä½•ä½¿ç”¨å¢å¼ºåçš„MarketMCPï¼Œè¯¥ç‰ˆæœ¬é›†æˆäº†AKToolsåŠŸèƒ½ï¼Œæä¾›äº†æ›´ä¸°å¯Œçš„è‚¡ç¥¨æ•°æ®æŸ¥è¯¢èƒ½åŠ›ã€‚

## ğŸ†• æ–°å¢åŠŸèƒ½

### 1. å¤šæ•°æ®æºæ”¯æŒ
- **ä¸œæ–¹è´¢å¯Œç½‘** (é»˜è®¤): å®æ—¶è‚¡ç¥¨è¡Œæƒ…æ•°æ®
- **AKTools**: é€šè¿‡HTTP APIè·å–AkShareæ•°æ®

### 2. æ–°å¢å·¥å…·

#### `get_stock_history`
è·å–è‚¡ç¥¨å†å²è¡Œæƒ…æ•°æ®ï¼Œæ”¯æŒå¤šç§æ—¶é—´å‘¨æœŸå’Œå¤æƒæ–¹å¼ã€‚

**å‚æ•°**:
- `codes`: è‚¡ç¥¨ä»£ç ï¼ˆå•ä¸ªæˆ–æ•°ç»„ï¼‰
- `period`: æ•°æ®å‘¨æœŸ (`daily`, `weekly`, `monthly`)
- `start_date`: å¼€å§‹æ—¥æœŸ (æ ¼å¼: 20240101)
- `end_date`: ç»“æŸæ—¥æœŸ (æ ¼å¼: 20241231)
- `adjust`: å¤æƒæ–¹å¼ (`''`, `qfq`, `hfq`)

**ç¤ºä¾‹**:
```json
{
  "codes": ["000001", "600000"],
  "period": "daily",
  "start_date": "20241201",
  "end_date": "20241210",
  "adjust": "qfq"
}
```

#### `get_stock_basic`
è·å–è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯ï¼ŒåŒ…æ‹¬å…¬å¸æ¦‚å†µã€è‚¡æœ¬ç»“æ„ç­‰ã€‚

**å‚æ•°**:
- `codes`: è‚¡ç¥¨ä»£ç ï¼ˆå•ä¸ªæˆ–æ•°ç»„ï¼‰

#### `get_market_overview`
è·å–å¸‚åœºæ¦‚è§ˆï¼ŒåŒ…æ‹¬æ€»ä½“ç»Ÿè®¡ã€è¡Œä¸šåˆ†å¸ƒç­‰ã€‚

**å‚æ•°**:
- `market`: å¸‚åœºèŒƒå›´ (`all`, `sh`, `sz`, `bj`)
- `sector`: æŒ‡å®šè¡Œä¸šæ¿å—

#### `check_service_status`
æ£€æŸ¥å„æ•°æ®æºæœåŠ¡çŠ¶æ€ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…AKTools (å¯é€‰)
å¦‚æœéœ€è¦ä½¿ç”¨AKToolsåŠŸèƒ½ï¼Œéœ€è¦å…ˆå®‰è£…AKTools:

```bash
pip install aktools
```

### 2. å¯åŠ¨AKToolsæœåŠ¡ (å¯é€‰)
```bash
# æ–¹æ³•1: ä½¿ç”¨æä¾›çš„è„šæœ¬
node scripts/start-aktools.js

# æ–¹æ³•2: æ‰‹åŠ¨å¯åŠ¨
python -m aktools
```

AKToolsæœåŠ¡é»˜è®¤è¿è¡Œåœ¨ `http://127.0.0.1:8080`

### 3. ä½¿ç”¨å¢å¼ºçš„MCPæœåŠ¡
```bash
# ç¼–è¯‘é¡¹ç›®
npm run build

# å¯åŠ¨MCPæœåŠ¡
node dist/index.js
```

## ğŸ“‹ åŠŸèƒ½å¯¹æ¯”

| åŠŸèƒ½ | ä¸œæ–¹è´¢å¯Œç½‘ | AKTools | è¯´æ˜ |
|------|-----------|----------|------|
| å®æ—¶è¡Œæƒ… | âœ… | âœ… | åŸºç¡€è‚¡ç¥¨æ•°æ® |
| å†å²æ•°æ® | âŒ | âœ… | æ”¯æŒæ—¥/å‘¨/æœˆå‘¨æœŸ |
| åŸºæœ¬ä¿¡æ¯ | âŒ | âœ… | å…¬å¸è¯¦ç»†èµ„æ–™ |
| å¸‚åœºæ¦‚è§ˆ | âŒ | âœ… | è¡Œä¸šç»Ÿè®¡åˆ†æ |
| æ•°æ®å¤æƒ | âŒ | âœ… | å‰å¤æƒ/åå¤æƒ |
| æœåŠ¡ä¾èµ– | æ—  | éœ€Python | AKToolséœ€è¦Pythonç¯å¢ƒ |

## ğŸ› ï¸ é…ç½®é€‰é¡¹

### AKToolsæœåŠ¡åœ°å€
å¦‚æœAKToolsæœåŠ¡è¿è¡Œåœ¨ä¸åŒåœ°å€ï¼Œå¯ä»¥ä¿®æ”¹é…ç½®ï¼š

æ–‡ä»¶: `src/services/aktools-service.ts`
```typescript
constructor(baseUrl: string = 'http://127.0.0.1:8080/api/public/') {
  this.baseUrl = baseUrl;
  // ...
}
```

### æ•°æ®æºé€‰æ‹©
åœ¨è°ƒç”¨å·¥å…·æ—¶æŒ‡å®šæ•°æ®æºï¼š

```json
{
  "codes": ["000001"],
  "data_source": "eastmoney"  // æˆ– "aktools"
}
```

## ğŸ§ª æµ‹è¯•

è¿è¡Œé›†æˆæµ‹è¯•ï¼š

```bash
# ç¡®ä¿AKToolsæœåŠ¡å·²å¯åŠ¨ï¼ˆå¦‚æœéœ€è¦ï¼‰
python -m aktools

# åœ¨å¦ä¸€ä¸ªç»ˆç«¯è¿è¡Œæµ‹è¯•
node test/aktools-integration-test.js
```

## ğŸ“Š ä½¿ç”¨ç¤ºä¾‹

### è·å–è‚¡ç¥¨å®æ—¶è¡Œæƒ…
```json
{
  "tool": "get_stock_info",
  "arguments": {
    "codes": "000001,600000",
    "data_source": "eastmoney"
  }
}
```

### è·å–å†å²æ•°æ®
```json
{
  "tool": "get_stock_history",
  "arguments": {
    "codes": ["000001"],
    "period": "daily",
    "start_date": "20241201",
    "end_date": "20241210",
    "adjust": "qfq"
  }
}
```

### è·å–å¸‚åœºæ¦‚è§ˆ
```json
{
  "tool": "get_market_overview",
  "arguments": {
    "market": "all",
    "sector": "é“¶è¡Œ"
  }
}
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ•°æ®æºé€‰æ‹©**:
   - æ—¥å¸¸ä½¿ç”¨æ¨èä¸œæ–¹è´¢å¯Œç½‘ï¼ˆé»˜è®¤ï¼Œæ— éœ€é¢å¤–æœåŠ¡ï¼‰
   - éœ€è¦å†å²æ•°æ®æˆ–è¯¦ç»†åˆ†ææ—¶ä½¿ç”¨AKTools

2. **AKToolsä¾èµ–**:
   - éœ€è¦Python 3.7+ç¯å¢ƒ
   - éœ€è¦å®‰è£…aktoolsåŒ…
   - æœåŠ¡éœ€è¦å•ç‹¬å¯åŠ¨

3. **æ€§èƒ½è€ƒè™‘**:
   - ä¸œæ–¹è´¢å¯Œç½‘APIæœ‰é¢‘ç‡é™åˆ¶ï¼Œå»ºè®®æ§åˆ¶è°ƒç”¨é¢‘ç‡
   - AKToolsæœåŠ¡æœ¬åœ°è¿è¡Œï¼Œå“åº”é€Ÿåº¦è¾ƒå¿«

4. **æ•°æ®æ ¼å¼**:
   - ä¸åŒæ•°æ®æºè¿”å›çš„å­—æ®µå¯èƒ½ç•¥æœ‰å·®å¼‚
   - å»ºè®®åœ¨ä½¿ç”¨å‰å…ˆæµ‹è¯•æ•°æ®æ ¼å¼

## ğŸ”§ æ•…éšœæ’é™¤

### AKToolsæœåŠ¡å¯åŠ¨å¤±è´¥
1. æ£€æŸ¥Pythonç‰ˆæœ¬: `python --version` (éœ€è¦3.7+)
2. æ£€æŸ¥aktoolså®‰è£…: `pip list | grep aktools`
3. æ£€æŸ¥ç«¯å£å ç”¨: `lsof -i :8080`

### æ•°æ®è·å–å¤±è´¥
1. æ£€æŸ¥ç½‘ç»œè¿æ¥
2. æ£€æŸ¥è‚¡ç¥¨ä»£ç æ ¼å¼ï¼ˆæ”¯æŒ6ä½æ•°å­—ä»£ç ï¼‰
3. ä½¿ç”¨ `check_service_status` å·¥å…·æ£€æŸ¥æœåŠ¡çŠ¶æ€

### ç¼–è¯‘é”™è¯¯
1. ç¡®ä¿å®‰è£…äº†æ‰€æœ‰ä¾èµ–: `npm install`
2. æ£€æŸ¥TypeScriptç‰ˆæœ¬: `npx tsc --version`
3. æ¸…ç†é‡æ–°ç¼–è¯‘: `rm -rf dist && npm run build`

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [AkShareå®˜æ–¹æ–‡æ¡£](https://akshare.akfamily.xyz/)
- [AKToolsé¡¹ç›®åœ°å€](https://github.com/akfamily/aktools)
- [ä¸œæ–¹è´¢å¯Œç½‘](https://www.eastmoney.com/)

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥æ”¹è¿›è¿™ä¸ªé¡¹ç›®ï¼

---

*æœ€åæ›´æ–°: 2024å¹´12æœˆ*